<form #registerForm="ngForm" (ngSubmit)="onSubmit()" class="register-form">
  <h2 class="mb-4">Register</h2>
  
  <!-- Error/Success Messages -->
  <div *ngIf="errorMessage" class="alert alert-danger" role="alert">
    {{ errorMessage }}
  </div>
  <div *ngIf="successMessage" class="alert alert-success" role="alert">
    {{ successMessage }}
  </div>
  
  <div class="mb-3">
    <label for="firstName" class="form-label">First Name *</label>
    <input
      type="text"
      id="firstName"
      name="firstName"
      class="form-control"
      required
      minlength="2"
      [(ngModel)]="firstName"
      #firstNameCtrl="ngModel"
      [disabled]="isLoading"
    />
    <div *ngIf="firstNameCtrl.invalid && firstNameCtrl.touched" class="text-danger">
      First name is required (min 2 characters).
    </div>
  </div>
  <div class="mb-3">
    <label for="middleName" class="form-label">Middle Name</label>
    <input
      type="text"
      id="middleName"
      name="middleName"
      class="form-control"
      [(ngModel)]="middleName"
      [disabled]="isLoading"
    />
  </div>
  <div class="mb-3">
    <label for="lastName" class="form-label">Last Name *</label>
    <input
      type="text"
      id="lastName"
      name="lastName"
      class="form-control"
      required
      minlength="2"
      [(ngModel)]="lastName"
      #lastNameCtrl="ngModel"
      [disabled]="isLoading"
    />
    <div *ngIf="lastNameCtrl.invalid && lastNameCtrl.touched" class="text-danger">
      Last name is required (min 2 characters).
    </div>
  </div>
  <div class="mb-3">
    <label for="mobile" class="form-label">Mobile *</label>
    <input
      type="tel"
      id="mobile"
      name="mobile"
      class="form-control"
      required
      pattern="^[6-9]\d{9}$"
      [(ngModel)]="mobile"
      #mobileCtrl="ngModel"
      [disabled]="isLoading"
      (blur)="checkMobileAvailability()"
    />
    <div *ngIf="mobileCtrl.invalid && mobileCtrl.touched" class="text-danger">
      Enter a valid 10-digit mobile number.
    </div>
  </div>
  <!-- <div class="mb-3">
    <label for="phone" class="form-label">Phone *</label>
    <input
      type="tel"
      id="phone"
      name="phone"
      class="form-control"
      required
      pattern="^\d{6,12}$"
      [(ngModel)]="phone"
      #phoneCtrl="ngModel"
    />
    <div *ngIf="phoneCtrl.invalid && phoneCtrl.touched" class="text-danger">
      Enter a valid phone number (6-12 digits).
    </div>
  </div> -->
  <div class="mb-3">
    <label for="dob" class="form-label">Date of Birth *</label>
    <input
      type="date"
      id="dob"
      name="dob"
      class="form-control"
      required
      [(ngModel)]="dob"
      #dobCtrl="ngModel"
      [disabled]="isLoading"
    />
    <div *ngIf="dobCtrl.invalid && dobCtrl.touched" class="text-danger">
      Date of Birth is required.
    </div>
  </div>
  <div class="mb-3">
    <label class="form-label">Gender *</label>
    <div>
      <div class="form-check form-check-inline">
        <input
          class="form-check-input"
          type="radio"
          name="gender"
          id="male"
          value="Male"
          required
          [(ngModel)]="gender"
          #genderCtrl="ngModel"
          [disabled]="isLoading"
        />
        <label class="form-check-label" for="male">Male</label>
      </div>
      <div class="form-check form-check-inline">
        <input
          class="form-check-input"
          type="radio"
          name="gender"
          id="female"
          value="Female"
          required
          [(ngModel)]="gender"
          [disabled]="isLoading"
        />
        <label class="form-check-label" for="female">Female</label>
      </div>
      <div class="form-check form-check-inline">
        <input
          class="form-check-input"
          type="radio"
          name="gender"
          id="other"
          value="Other"
          required
          [(ngModel)]="gender"
          [disabled]="isLoading"
        />
        <label class="form-check-label" for="other">Other</label>
      </div>
    </div>
    <div *ngIf="genderCtrl.invalid && registerForm.submitted" class="text-danger">
      Gender is required.
    </div>
  </div>
  <div class="mb-3">
    <label for="userType" class="form-label">User Type *</label>
    <select
      id="userType"
      name="userType"
      class="form-select"
      required
      [(ngModel)]="userType"
      #userTypeCtrl="ngModel"
      [disabled]="isLoading"
    >
      <option value="" disabled selected>Select user type</option>
      <option value="Customer">Customer</option>
      <option value="Admin">Admin</option>
      <option value="Staff">Staff</option>
    </select>
    <div *ngIf="userTypeCtrl.invalid && userTypeCtrl.touched" class="text-danger">
      User type is required.
    </div>
  </div>
  
  <div class="mb-3">
    <label for="email" class="form-label">Email *</label>
    <input
      type="email"
      id="email"
      name="email"
      class="form-control"
      required
      email
      [(ngModel)]="email"
      #emailCtrl="ngModel"
      [disabled]="isLoading"
      (blur)="checkEmailAvailability()"
    />
    <div *ngIf="emailCtrl.invalid && emailCtrl.touched" class="text-danger">
      Please enter a valid email address.
    </div>
  </div>
  
  <div class="mb-3">
    <label for="password" class="form-label">Password *</label>
    <input
      type="password"
      id="password"
      name="password"
      class="form-control"
      required
      minlength="6"
      [(ngModel)]="password"
      #passwordCtrl="ngModel"
      [disabled]="isLoading"
    />
    <div *ngIf="passwordCtrl.invalid && passwordCtrl.touched" class="text-danger">
      Password must be at least 6 characters long.
    </div>
  </div>
  
  <div class="mb-3">
    <label for="confirmPassword" class="form-label">Confirm Password *</label>
    <input
      type="password"
      id="confirmPassword"
      name="confirmPassword"
      class="form-control"
      required
      [(ngModel)]="confirmPassword"
      #confirmPasswordCtrl="ngModel"
      [disabled]="isLoading"
    />
    <div *ngIf="confirmPasswordCtrl.touched && password !== confirmPassword" class="text-danger">
      Passwords do not match.
    </div>
  </div>
  
  <button type="submit" class="btn btn-primary w-100" [disabled]="registerForm.invalid || isLoading || password !== confirmPassword">
    <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2" role="status"></span>
    {{ isLoading ? 'Registering...' : 'Register' }}
  </button>
  <div class="mt-3 text-center">
    <span>Already registered?</span>
    <a routerLink="/sign-in" class="btn btn-link">Login here</a>
  </div>
</form>